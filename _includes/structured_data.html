{% assign lb = site.local_business %}
{% if lb %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "{{ lb.type | default: 'LocalBusiness' }}",
  "name": "{{ site.title }}",
  "image": "{{ site.logo | relative_url | absolute_url }}",
  "url": "{{ site.url }}{{ site.baseurl }}",
  "telephone": "{{ site.phone }}",
  "priceRange": "{{ lb.price_range | default: '€€' }}",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "{{ site.address.street }}",
    "addressLocality": "{{ site.address.city }}",
    "postalCode": "{{ site.address.postal_code }}",
    "addressCountry": "{{ site.address.country }}"
  },
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": "{{ lb.geo.latitude }}",
    "longitude": "{{ lb.geo.longitude }}"
  },
  "areaServed": [{% for area in lb.service_area %}{ "@type": "City", "name": "{{ area }}" }{% unless forloop.last %}, {% endunless %}{% endfor %}],
  "openingHoursSpecification": [
    {% for window in site.open_hours %}
    {
      "@type": "OpeningHoursSpecification",
      "dayOfWeek": "{{ window.day }}",
      {% if window.closed %}
      "opens": "00:00",
      "closes": "00:00",
      "description": "geschlossen"
      {% else %}
      "opens": "{{ window.opens }}",
      "closes": "{{ window.closes }}"
      {% endif %}
    }{% unless forloop.last %},
    {% endunless %}
    {% endfor %}
  ]
}
</script>
{% endif %}
{% if page.schema_type == 'Service' %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Service",
  "name": "{{ page.title }}",
  "serviceType": "{{ page.service_type | default: page.title }}",
  "provider": {
    "@type": "{{ lb.type | default: 'LocalBusiness' }}",
    "name": "{{ site.title }}",
    "url": "{{ site.url }}{{ site.baseurl }}"
  },
  "areaServed": {
    "@type": "City",
    "name": "Wien"
  },
  "description": "{{ page.description | default: page.excerpt | strip_html | normalize_whitespace }}",
  "offers": {
    "@type": "Offer",
    "priceCurrency": "EUR",
    "url": "{{ page.url | relative_url | absolute_url }}"
  }
}
</script>
{% endif %}
{% assign faq_items = page.faqs %}
{% if faq_items == nil and page.use_global_faqs %}
  {% assign faq_items = site.data.faqs %}
{% endif %}
{% if faq_items %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {% for faq in faq_items %}
    {
      "@type": "Question",
      "name": "{{ faq.question | strip_html }}",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "{{ faq.answer | strip_newlines | escape }}"
      }
    }{% unless forloop.last %},
    {% endunless %}
    {% endfor %}
  ]
}
</script>
{% endif %}
